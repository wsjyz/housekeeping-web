<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="${request.contextPath}/components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="${request.contextPath}/components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="${request.contextPath}/components/bootstrapValidator/dist/css/bootstrapValidator.min.css">
    <link rel="stylesheet" href="${request.contextPath}/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="${request.contextPath}/css/main.css">

    <script src="${request.contextPath}/components/modernizr/modernizr.js"></script>
    <script src="${request.contextPath}/components/jquery/dist/jquery.min.js"></script>
    <script src="${request.contextPath}/components/underscore/underscore.js"></script>
    <script src="${request.contextPath}/components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="${request.contextPath}/components/bootstrapValidator/dist/js/bootstrapValidator.min.js"></script>
    <script src="${request.contextPath}/components/jquery-form/jquery.form.js"></script>
    <script src="${request.contextPath}/components/bootstrapValidator/dist/js/language/zh_CN.js"></script>
     <script>
        var DEFAULT_PAGE = 'toInstitution';
    </script>
  </head>
  <body>
    <div class="login-box">
      <h1>居优家政后台管理系统</h1>
      <div class="login-border">
         <script id="tips-template" type="text/template">
          <div class="tips alert alert-danger alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert">
              <span aria-hidden="true">&times;</span>
              <span class="sr-only">Close</span>
            </button>
            <p class="content"><%=message%></p>
          </div>
        </script>

        <div class="panel panel-default">
          <div class="panel-body">
<!--             <form id="loginForm" action="${request.contextPath}/UserService/loginIng" class="form-horizontal"> -->
<!--               <div class="input-group input-group-lg"> -->
<!--                 <span class="input-group-addon">帐号: </span> -->
<!--                 <input type="text" class="form-control" placeholder="手机号码" name="mobile" required="required"> -->
<!--               </div> -->
<!--               <div class="input-group input-group-lg"> -->
<!--                 <span class="input-group-addon">密码: </span> -->
<!--                 <input type="text" class="form-control" placeholder="密码" required="required" name="password"> -->
<!--               </div> -->

<!--               <div class="login-footer"> -->
<!--                 <button type="submit"  class="btn btn-lg" role="button">登 录</button> -->
<!--               </div> -->
<!--             </form> -->
            <form id="loginForm" action="${request.contextPath}/UserService/loginIng" method="post" class="form-horizontal">

              <div class="form-group">
                <label class="col-lg-3 control-label">帐号: </label>
                <div class="col-lg-8">
                  <input type="text" required="" class="form-control input-lg" placeholder="手机号码" name="mobile">
                </div>
              </div>

              <div class="form-group">
                <label class="col-lg-3 control-label">密码: </label>
                <div class="col-lg-8">
                  <input type="password"  class="form-control input-lg"placeholder="密码"  name="password" >
                </div>
              </div>

              <div class="login-footer">
                <button type="submit" class="btn btn-lg btn-primary" role="button">登 录</button>
              </div>
            </form>
          </div>
        </div>
        <div class="links">
          <a href="forgot-pwd.html" class="forgot-pwd">忘记密码？</a>
        </div>
      </div>
    </div>
    <div class="footer login">
      @居优信息科技有限公司
    </div>
    <!--[if lt IE 8]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script type="ss">
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>
           <!-- <script src="${request.contextPath}/js/main.js"></script> -->
    
<script type="text/javascript">
        jQuery(function($) {
            'use strict';
            $('#loginForm').bootstrapValidator({
                message       : 'This value is not valid',
                //submitButtons : 'button[type="submit"]',
                feedbackIcons : {
                    valid      : 'fa fa-check-square',
                    invalid    : 'fa fa-warning',
                    validating : 'fa fa-spinner fa-spin'
                },
                fields: {
                    username: {
                        message: '请输入账户名',
                        validators: {
                            regexp: {
                                regexp: /^[a-zA-Z0-9_]+$/,
                                message: '只能包含这些字符：[a-zA-Z0-9_]'
                            }
                        }
                    },
                    password: {
                        message: '请输入密码',
                        validators: {
                            stringLength: {
                                min: 6,
                                max: 30,
                                message: '长度必须大于6小于30'
                            },
                            regexp: {
                                regexp: /^[a-zA-Z0-9_]+$/,
                                message: '[a-zA-Z0-9_]'
                            }
                        }
                    }
                }
            })
            .ajaxForm({
                dataType     : 'json',
                beforeSubmit : function(arr, $form, options) {
                    $('.tips').remove();
                    $('[type="submit"]').prepend('<span class="fa fa-spinner fa-spin"></span>');
                },
                success: function(json) {
                    var tipsTemp = $('#tips-template');

                    $('[type="submit"] .fa-spin').remove();
                    if (json && json.success) {
                        $('body').fadeOut();
                        window.location =""+ json.url;
                    } else {
                        $(_.template(tipsTemp.html(), {
                            message: json.message||"登录失败，请输入正确的账户和密码。"
                        })).insertAfter(tipsTemp);
                    }
                },
                error: function() {
                    var tipsTemp = $('#tips-template');
                    $('[type="submit"]').removeAttr('disabled').find('.fa-spin').remove();

                    $(_.template(tipsTemp.html(), {
                        message: '网络拥堵或服务器繁忙。'
                    })).insertAfter(tipsTemp);
                }
            });

        });
    </script>
</body>
</html>
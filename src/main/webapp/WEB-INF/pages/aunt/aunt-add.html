<div class="content-tools clearfix">

	<div class="btns-right">
<!-- 		<a href="${request.contextPath}/AuntService/toAuntAdd" -->
<!-- 			class="btn btn-primary"> <span class="glyphicon glyphicon-plus"></span> -->
<!-- 			继续添加 -->
<!-- 		</a> -->
		 <a href="${request.contextPath}/AuntService/toAunt?auntId=${auntId!}"
			class="btn btn-primary"> <span
			class="glyphicon glyphicon-arrow-left"></span> 返回
		</a>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">添加阿姨</div>
	<form id="auntAddForm" name="auntAddForm" action="" method="post"
		class="form-horizontal">
		<input type="hidden" name="auntId" value="${auntId!}" />
		<div class="form-panel panel-body">
			<div class="row">
				<div class="col col-lg-6 col-md-8 col-sm-10 col-xs-12">
					<div class="form-group">
						<label class="col-lg-3 control-label"> 姓名 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="userName" required >
						</div>
					</div>
					<div class="form-group">
						<label class="col-lg-3 control-label">手机号 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="mobile" required> 
						</div>
					</div>

					<div class="form-group">
						<label class="col-lg-3 control-label">电话 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="telephone" maxlength="10">
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">身份证号</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="identityCard" required>
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">诚信认证 </label>
						<div class="col-lg-8">
							<select class="form-control" name="integrityAuth"
								id="integrityAuth">
								<option value="true">是</option>
								<option value="false">否</option>
							</select>
						</div>
					</div>

					<div class="form-group">
						<label class="col-lg-3 control-label">籍贯 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="nativePlace" maxlength="5">
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">地址</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="address" required>
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">自我评价 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="selfEvaluate" maxlength="100">
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">密码 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="password" required>
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">分类</label>
						<div class="col-lg-8">
							<select class="form-control" name="workType" id="workType">
								<option value="HOUR_WORK">小时工</option>
								<option value="ALL">全职</option>
							</select>
							<div class="form-group" class="">
								<label for=""> <input type="checkbox" name="workCleanKeeping" value="true" id="baojie"> 保洁
								</label>
								<label for=""> <input type="checkbox"value="true" 
									name="workLaundry" id="xiyun"> 洗熨
								</label> <label for="zuofan"> <input type="checkbox" value="true" name="workCook"
									id=""> 做饭
								</label>
							</div>
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label"> 星级 </label>
						<div class="col-lg-8">
							<select class="form-control" name="start" id="start">
								<option value="5">五星</option>
								<option value="4">四星</option>
								<option value="3">三星</option>
								<option value="2">二星</option>
								<option value="1">一星</option>
							</select>
						</div>
					</div>
					   <#if corpId?? && (corpId=="ADMIN")>
					<div class="form-group">
						<label class="col-lg-3 control-label">机构: </label>
						<div class="col-lg-8">
							<select class="form-control" name="corpId" id="corpName">
								<#list corpList as corp>
								<option value="${corp.corpId}">${corp.corpName}</option>
								</#list>
							</select>
						</div>
					</div>
					</#if>
					<!-- /input-group -->

				</div>
				<!-- /.col-lg-6 -->

				<div class="col col-lg-4 col-md-5 col-sm-6 col-xs-12">

					<div class="input-group">
						<div class="avatar-view">
							<img id="avatar-img"
								src="${request.contextPath}/images/avatar.jpg" width="80"
								height="80" />
						</div>
						<button class="btn btn-default" type="button" id="upload"
							name="upload" value="upload">上传照片</button>
					</div>
					<div class="form-group">
						<label class="col-lg-3 control-label">年龄</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="age" maxlength="3">
						</div>
						<div style="float: left;">岁</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">单价 </label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="price" maxlength="8" min="0">
						</div>
						<div style="float: left;">元</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">工作经验</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="workYear" maxlength="2">
						</div>
						<div style="float: left;">年</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">能力分值</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="abilityScore" maxlength="4">
						</div>
						<div style="float: left;">分</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">简评</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="description" maxlength="100">
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">业务</label>
						<div class="col-lg-8">
							<input type="text" class="form-control" name="busiDesc" maxlength="20">
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">血型 </label>
						<div class="col-lg-8">
							<select class="form-control" name="bloodType" id="bloodType">
								<option value="A">A</option>
								<option value="B">B</option>
								<option value="O">O</option>
								<option value="AB">AB</option>
							</select>
						</div>
					</div>
					<!-- /input-group -->

					<div class="form-group">
						<label class="col-lg-3 control-label">星座 </label>
						<div class="col-lg-8">
							<select class="form-control" name="constellation"
								id="constellation">
								<option value="">不知道</option>
								<option value="白羊座">白羊座</option>
								<option value="金牛座">金牛座</option>
								<option value="双子座">双子座</option>
								<option value="巨蟹座">巨蟹座</option>
								<option value="狮子座">狮子座</option>
								<option value="双鱼座">双鱼座</option>
								<option value="处女座">处女座</option>
								<option value="天秤座">天秤座</option>
								<option value="天蝎座">天蝎座</option>
								<option value="射手座">射手座</option>
								<option value="摩羯座">摩羯座</option>
								<option value="水瓶座">水瓶座</option>
							</select>
						</div>
					</div>

					<div class="form-group" id='caseShow'>
						 <#if auntWorkCaseList?exists>
						<#list auntWorkCaseList as case>
			            	<a style="display: none;" href="${request.contextPath}/AuntService/toCaseEdit?auntId=${auntId}&caseId=${case.caseId}" data-id="${case.type}" class="case-link btn btn-default">${case.description!}</a>
			            </#list>
			           </#if>
					</div>

				</div>
			</div>
		</div>
		<div class="panel-footer">
			<button class="btn btn-lg btn-primary" type="submit">&nbsp;确认&nbsp;</button>
		</div>
	</form>
</div>

<script>
	jQuery(function($) {
		$("#upload").uploadify({
			height : 30,
			swf : '${request.contextPath}/components/uploadify/uploadify.swf',
			uploader : '${request.contextPath}/UserService/saveImageObj?objId=${auntId!}&objType=PORTRAIT',
			width : 120,
			'fileObjName' : 'file',
			buttonText:"上 传",
			'buttonClass' : 'btn btn-primary avatar-uploader upload-button',
			'onUploadSuccess' : function(file, data, response) {
				$("#avatar-img").attr(
						'src',
						"${request.contextPath}/images/portrait/"
								+ data);
			}
		});

		$('#auntAddForm').bootstrapValidator({
			message : '请检查输入项。',
			//submitButtons : 'button[type="submit"]',
			feedbackIcons : {
				valid : 'fa fa-check-square',
				invalid : 'fa fa-warning',
				validating : 'fa fa-spinner fa-spin'
			},
			fields : {
				mobile : {
					message : '请输入手机号',
					validators : {
						stringLength : {
							min : 11,
							max : 11,
							message : '长度必须是11位'
						},
						regexp : {
							regexp : /^1[3|4|5|8][0-9]\d{4,8}$/,
							message : '手机号码不正确'
						}
					}
				},
				identityCard : {
					message : '请输入身份证号',
					validators : {
						remote:{url:"${request.contextPath}/AuntService/checkIdentityCard",
							message:"身份证号已存在"
							},
						stringLength : {
							min : 18,
							max : 18,
							message : '长度必须是18位'
						},
						regexp : {
							regexp : /^[0-9]{0,17}[0-9xX]{1}$/,
							message : '身份证号码不正确'
						}
					}
				},
				userName : {
					message : '请输入姓名',
					validators : {
						stringLength : {
							min : 2,
							max : 30,
							message : '长度必须大于2小于30'
						}
					}
				},
				password : {
					message : '请输入密码',
					validators : {
						stringLength : {
							min : 6,
							max : 30,
							message : '长度必须大于6小于30'
						}
					}
				},
				address : {
					message : '请输入地址',
					validators : {
						stringLength : {
							min : 2,
							max : 50,
							message : '长度必须大于2小于50'
						}
					}
				}
			}
		}).on('success.form.bv', function(event) {
			event.preventDefault();
			var form = $(this);
			var url = "${request.contextPath}/AuntService/saveAunt"
			var json = form.formToJson();
			$.post(url, {
				"auntInfo" : json
			}, function() {
				alert("保存成功!");
				$(".case-link").show();
			});
		});
	});
</script>